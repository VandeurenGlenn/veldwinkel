importScripts("./../third-party/webp/enc/webp_enc.js");const e=webp_enc();onmessage=(({data:t})=>{let s=e.encode(t[0],t[1],t[2],{quality:quality,target_size:0,target_PSNR:0,method:4,sns_strength:50,filter_strength:60,filter_sharpness:0,filter_type:1,partitions:0,segments:4,pass:1,show_compressed:0,preprocessing:0,autofilter:0,partition_limit:0,alpha_compression:1,alpha_filtering:1,alpha_quality:100,lossless:0,exact:0,image_hint:0,emulate_jpeg_size:0,thread_level:0,low_memory:0,near_lossless:100,use_delta_palette:0,use_sharp_yuv:0});const a=new Uint8Array(s);e.free_result(),s=(e=>{let t,s,a,r,l,i,n,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p="",o=0;for(;o<e.length;)r=(t=e[o++])>>2,l=(3&t)<<4|(s=o<e.length?e[o++]:Number.NaN)>>4,i=(15&s)<<2|(a=o<e.length?e[o++]:Number.NaN)>>6,n=63&a,isNaN(s)?i=n=64:isNaN(a)&&(n=64),p+=_.charAt(r)+_.charAt(l)+_.charAt(i)+_.charAt(n);return p})(a),postMessage(s)});
